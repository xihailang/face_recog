(function(){var e={776:function(e,t,n){"use strict";var o=n(751),r=n(641);function i(e,t,n,o,i,a){const c=(0,r.g2)("FaceRecognition");return(0,r.uX)(),(0,r.Wv)(c)}const a={ref:"video",width:"640",height:"480",autoplay:""},c={ref:"canvas",width:"640",height:"480"};function s(e,t,n,o,i,s){return(0,r.uX)(),(0,r.CE)("div",null,[(0,r.Lk)("video",a,null,512),(0,r.Lk)("canvas",c,null,512),(0,r.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>s.startRecognition&&s.startRecognition(...e))},"开始识别"),(0,r.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>s.stopRecognition&&s.stopRecognition(...e))},"停止识别"),(0,r.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>s.sendData&&s.sendData(...e))},"发送数据")])}var d=n(870),l=n(335),u={data(){return{stream:null,interval:null,detectedFace:null}},async mounted(){await this.loadModels(),await this.initVideo()},methods:{async loadModels(){await d.B0.ssdMobilenetv1.loadFromUri("/models"),await d.B0.faceLandmark68Net.loadFromUri("/models"),await d.B0.faceRecognitionNet.loadFromUri("/models")},async initVideo(){const e=this.$refs.video;this.stream=await navigator.mediaDevices.getUserMedia({video:!0}),e.srcObject=this.stream},startRecognition(){const e=this.$refs.video,t=this.$refs.canvas,n=t.getContext("2d");this.interval=setInterval((async()=>{const o=await d.R(e).withFaceLandmarks().withFaceDescriptors();if(n.clearRect(0,0,t.width,t.height),o.length>0){const e=d.Lz(o,{width:640,height:480});d.$2.drawDetections(t,e),d.$2.drawFaceLandmarks(t,e),this.detectedFace=e[0].descriptor}}),100)},stopRecognition(){clearInterval(this.interval),this.stream&&this.stream.getTracks().forEach((e=>e.stop()))},sendData(){if(this.detectedFace){const e=Array.from(this.detectedFace);l.A.post("http://localhost:4000/face-data",{data:e}).then((e=>{console.log("Data sent successfully:",e.data)})).catch((e=>{console.error("Error sending data:",e)}))}else console.warn("No face detected to send.")}},beforeDestroy(){this.stopRecognition()}},f=n(262);const h=(0,f.A)(u,[["render",s],["__scopeId","data-v-aa6ed9ca"]]);var v=h,g={name:"App",components:{FaceRecognition:v}};const p=(0,f.A)(g,[["render",i]]);var m=p,w=n(723);(0,w.k)("/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}}),(0,o.Ef)(m).mount("#app")},82:function(){},318:function(){},745:function(){},591:function(){}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var i=t[o]={exports:{}};return e[o](i,i.exports,n),i.exports}n.m=e,function(){var e=[];n.O=function(t,o,r,i){if(!o){var a=1/0;for(l=0;l<e.length;l++){o=e[l][0],r=e[l][1],i=e[l][2];for(var c=!0,s=0;s<o.length;s++)(!1&i||a>=i)&&Object.keys(n.O).every((function(e){return n.O[e](o[s])}))?o.splice(s--,1):(c=!1,i<a&&(a=i));if(c){e.splice(l--,1);var d=r();void 0!==d&&(t=d)}}return t}i=i||0;for(var l=e.length;l>0&&e[l-1][2]>i;l--)e[l]=e[l-1];e[l]=[o,r,i]}}(),function(){n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};n.O.j=function(t){return 0===e[t]};var t=function(t,o){var r,i,a=o[0],c=o[1],s=o[2],d=0;if(a.some((function(t){return 0!==e[t]}))){for(r in c)n.o(c,r)&&(n.m[r]=c[r]);if(s)var l=s(n)}for(t&&t(o);d<a.length;d++)i=a[d],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return n.O(l)},o=self["webpackChunkvue_demo"]=self["webpackChunkvue_demo"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=n.O(void 0,[504],(function(){return n(776)}));o=n.O(o)})();
//# sourceMappingURL=app.d7b7deff.js.map